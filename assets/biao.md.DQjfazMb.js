import{_ as v,c as s,o as a,j as i,e as u,a as m,am as f,an as c,t as l,ao as C,Z as P,a0 as h,F as I,B as S,G as V}from"./chunks/framework.BIf3juHF.js";function b(o,e){let d;return function(...g){clearTimeout(d),d=setTimeout(()=>o.apply(this,g),e)}}function N(o=4){const e="0123456789";return Array.from({length:o},()=>e[Math.floor(Math.random()*e.length)]).join("")}function y(o){return/^1[3-9]\d{9}$/.test(o)}function k(o){if(!/^\d{17}[\dXx]$/.test(o))return!1;const d=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],g=["1","0","X","9","8","7","6","5","4","3","2"],t=o.substring(0,17).split("").reduce((n,r,p)=>n+parseInt(r)*d[p],0);return g[t%11]===o[17].toUpperCase()}const R={data(){return{form:{name:"",contact:"",idNumber:"",location:"广东深圳",joinDate:"",verificationCode:"",agree:!0},generatedVerificationCode:"",submitted:!1,lastSubmittedForm:{},allRecords:[],isAdmin:!1,currentPage:1,pageSize:5,errors:{},loading:!1}},computed:{paginatedRecords(){const o=(this.currentPage-1)*this.pageSize;return this.allRecords.slice(o,o+this.pageSize)},totalPages(){return Math.ceil(this.allRecords.length/this.pageSize)}},mounted(){this.generateVerificationCode(),localStorage.getItem("records")&&(this.allRecords=JSON.parse(localStorage.getItem("records")))},methods:{generateVerificationCode(){this.generatedVerificationCode=N(),this.errors.verificationCode=""},validatePhoneInput:b(function(){this.form.contact&&!y(this.form.contact)?this.errors.contact="手机号格式不正确":this.errors.contact=""},300),validateIDInput:b(function(){this.form.idNumber&&!k(this.form.idNumber)?this.errors.idNumber="身份证号格式不正确":this.errors.idNumber=""},300),validateNameInput(){this.form.name&&this.form.name.length<2?this.errors.name="姓名至少需要2个字符":this.errors.name=""},handleSubmit(){if(this.validateNameInput(),this.validatePhoneInput(),this.validateIDInput(),this.form.verificationCode!==this.generatedVerificationCode){this.errors.verificationCode="验证码错误",this.generateVerificationCode();return}this.errors.name||this.errors.contact||this.errors.idNumber||(this.loading=!0,setTimeout(()=>{this.lastSubmittedForm={...this.form},this.allRecords.push({...this.form}),localStorage.setItem("records",JSON.stringify(this.allRecords)),this.submitted=!0,this.loading=!1,this.resetForm()},500))},resetForm(){this.form={name:"",contact:"",idNumber:"",location:"广东深圳",joinDate:"",verificationCode:"",agree:!0},this.errors={},this.generateVerificationCode()},formatRecord(o){return`姓名: ${o.name}
联系方式: ${o.contact}
身份证号: ${o.idNumber}
意向厂区: ${o.location}
预计入职时间: ${o.joinDate||"未填写"}
推荐承诺书: ${o.agree?"已同意":"未同意"}`},loginAdmin(){prompt("请输入管理员密码：")==="hy012210yxj"?this.isAdmin=!0:alert("密码错误，请重试！")},logout(){this.isAdmin=!1,this.currentPage=1},deleteRecord(o){this.allRecords.splice(o,1),localStorage.setItem("records",JSON.stringify(this.allRecords)),this.paginatedRecords.length===0&&this.currentPage>1&&this.currentPage--}}},D={class:"form-wrapper"},j={key:0,class:"error"},w={key:0,class:"error"},q={key:0,class:"error"},x={key:0,class:"error"},A=["disabled"],F={key:0,class:"submitted-info"},M={key:1,class:"admin-view"},U=["onClick"],B={class:"pagination"},z=["disabled"],O=["disabled"],T={class:"admin-login"};function J(o,e,d,g,t,n){return a(),s("div",D,[i("form",{onSubmit:e[10]||(e[10]=h((...r)=>n.handleSubmit&&n.handleSubmit(...r),["prevent"]))},[i("label",null,[e[15]||(e[15]=m(" 姓名 ",-1)),f(i("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>t.form.name=r),placeholder:"请填写真实姓名",required:"","aria-required":"true","aria-label":"姓名"},null,512),[[c,t.form.name,void 0,{trim:!0}]]),t.errors.name?(a(),s("span",j,l(t.errors.name),1)):u("",!0)]),i("label",null,[e[16]||(e[16]=m(" 联系方式 ",-1)),f(i("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>t.form.contact=r),placeholder:"请填写手机号",required:"",onBlur:e[2]||(e[2]=(...r)=>n.validatePhoneInput&&n.validatePhoneInput(...r)),"aria-required":"true","aria-label":"联系方式"},null,544),[[c,t.form.contact,void 0,{trim:!0}]]),t.errors.contact?(a(),s("span",w,l(t.errors.contact),1)):u("",!0)]),i("label",null,[e[17]||(e[17]=m(" 身份证号 ",-1)),f(i("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>t.form.idNumber=r),placeholder:"请填写身份证号",required:"",onBlur:e[4]||(e[4]=(...r)=>n.validateIDInput&&n.validateIDInput(...r)),"aria-required":"true","aria-label":"身份证号"},null,544),[[c,t.form.idNumber,void 0,{trim:!0}]]),t.errors.idNumber?(a(),s("span",q,l(t.errors.idNumber),1)):u("",!0)]),i("label",null,[e[19]||(e[19]=m(" 意向厂区 ",-1)),f(i("select",{"onUpdate:modelValue":e[5]||(e[5]=r=>t.form.location=r),"aria-label":"意向厂区"},e[18]||(e[18]=[i("option",{value:"广东深圳"},"广东深圳",-1)]),512),[[C,t.form.location]])]),i("label",null,[e[20]||(e[20]=m(" 预计入职时间 ",-1)),f(i("input",{type:"date","onUpdate:modelValue":e[6]||(e[6]=r=>t.form.joinDate=r),"aria-label":"预计入职时间"},null,512),[[c,t.form.joinDate]])]),i("label",null,[e[21]||(e[21]=m(" 图形验证码 ",-1)),f(i("input",{"onUpdate:modelValue":e[7]||(e[7]=r=>t.form.verificationCode=r),placeholder:"请填写",required:"","aria-required":"true","aria-label":"验证码"},null,512),[[c,t.form.verificationCode]]),i("span",{class:"verification",onClick:e[8]||(e[8]=(...r)=>n.generateVerificationCode&&n.generateVerificationCode(...r)),role:"button",tabindex:"0",onKeydown:e[9]||(e[9]=P((...r)=>n.generateVerificationCode&&n.generateVerificationCode(...r),["enter"]))},l(t.generatedVerificationCode),33),t.errors.verificationCode?(a(),s("span",x,l(t.errors.verificationCode),1)):u("",!0)]),i("button",{type:"submit",disabled:t.loading},l(t.loading?"提交中...":"提交"),9,A)],32),t.submitted?(a(),s("div",F,[e[22]||(e[22]=i("h3",null,"您提交的信息",-1)),i("pre",null,l(n.formatRecord(t.lastSubmittedForm)),1)])):u("",!0),t.isAdmin?(a(),s("div",M,[e[23]||(e[23]=i("h3",null,"所有填表记录",-1)),i("button",{onClick:e[11]||(e[11]=(...r)=>n.logout&&n.logout(...r))},"退出管理员"),(a(!0),s(I,null,S(n.paginatedRecords,(r,p)=>(a(),s("div",{key:p,class:"record"},[i("pre",null,l(n.formatRecord(r)),1),i("button",{onClick:E=>n.deleteRecord(p+(t.currentPage-1)*t.pageSize)},"删除",8,U)]))),128)),i("div",B,[i("button",{onClick:e[12]||(e[12]=r=>t.currentPage--),disabled:t.currentPage===1},"上一页",8,z),i("span",null,"第 "+l(t.currentPage)+" 页",1),i("button",{onClick:e[13]||(e[13]=r=>t.currentPage++),disabled:t.currentPage>=n.totalPages},"下一页",8,O)])])):u("",!0),i("div",T,[i("a",{href:"#",onClick:e[14]||(e[14]=h((...r)=>n.loginAdmin&&n.loginAdmin(...r),["prevent"])),"aria-label":"管理员登录"},"管理员入口")])])}const K=v(R,[["render",J],["__scopeId","data-v-a0aa470e"]]),L=JSON.parse('{"title":"","description":"","frontmatter":{"page":true,"head":[["link",{"rel":"canonical","href":"https://v2vv.com/biao"}],["meta",{"property":"og:title","content":""}]]},"headers":[],"relativePath":"biao.md","filePath":"biao.md"}'),X={name:"biao.md"},Z=Object.assign(X,{setup(o){return(e,d)=>(a(),s("div",null,[V(K)]))}});export{L as __pageData,Z as default};
